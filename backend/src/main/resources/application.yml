spring:
  application:
    name: wuxing-backend
  profiles:
    active: dev
  
  # 文件上传配置
  servlet:
    multipart:
      enabled: true
      max-file-size: 100MB      # 单个文件最大100MB
      max-request-size: 100MB   # 总请求最大100MB
      file-size-threshold: 0
  
  # 数据源配置
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/wuxing_db?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true
    username: root
    password: Sam1982,.
    hikari:
      jdbc-url: jdbc:mysql://localhost:3306/wuxing_db?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true
      username: root
      password: Sam1982,.
    
  # Redis配置
  data:
    redis:
      host: localhost
      port: 6379
      password: ""
      database: 0
      timeout: 3000ms
      lettuce:
        pool:
          max-active: 8
          max-wait: -1ms
          max-idle: 8
          min-idle: 0

# 服务器配置
server:
  port: 8080
  servlet:
    # context-path: /api  # 去掉上下文路径，直接访问根路径
    encoding:
      charset: UTF-8
      enabled: true
      force: true

# MyBatis Plus配置
mybatis-plus:
  mapper-locations: classpath*:/mapper/**/*.xml
  type-aliases-package: com.wuxing.entity
  configuration:
    map-underscore-to-camel-case: true
    cache-enabled: false
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  global-config:
    db-config:
      id-type: auto
      logic-delete-field: deleted
      logic-delete-value: 1
      logic-not-delete-value: 0

# JWT配置
jwt:
  secret: wuxing-secret-key-change-in-production-environment
  expiration: 86400000  # 24小时，单位毫秒

# Knife4j配置
knife4j:
  enable: true
  openapi:
    title: 五行项目API文档
    description: 五行项目后端接口文档
    version: 1.0.0
    contact:
      name: wuxing
      email: wuxing@example.com
    group:
      default:
        group-name: 默认分组
        api-rule: package
        api-rule-resources:
          - com.wuxing.controller

# 日志配置
logging:
  level:
    root: info
    com.wuxing: debug
  pattern:
    console: '%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n'
  file:
    name: logs/wuxing.log
    max-size: 10MB
    max-history: 30

# 阿里云OSS配置
aliyun:
  oss:
    access-key-id: ${ALIYUN_OSS_ACCESS_KEY_ID:}
    access-key-secret: ${ALIYUN_OSS_ACCESS_KEY_SECRET:}
    bucket-name: ${ALIYUN_OSS_BUCKET_NAME:wuxing-files}
    # 使用标准Bucket Endpoint（不使用接入点）
    endpoint: ${ALIYUN_OSS_ENDPOINT:oss-cn-shenzhen.aliyuncs.com}
    domain: ${ALIYUN_OSS_DOMAIN:}
    prefix: ${ALIYUN_OSS_PREFIX:wuxing/}


#acs:oss:cn-shenzhen:1888147729201829:accesspoint/wuxing/object/*