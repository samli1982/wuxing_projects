<view class="page">
  <view class="status-bar" style="height: {{statusBarHeight}}px;"></view>
  <view class="nav">
    <view class="nav-left" bindtap="onBack">←</view>
    <view class="nav-title">创建个人命盘</view>
  </view>

  <view class="intro">
    <text class="intro-icon">✨</text>
    <view class="intro-texts">
      <text class="intro-title">输入您的出生信息</text>
      <text class="intro-sub">系统将自动推算八字、五运六气体质与调理方向</text>
    </view>
  </view>

  <view class="section">
    <view class="section-title">👤 基本信息</view>
    <view class="form-field">
      <input class="input" placeholder="姓名（可选）" bindinput="onInputName" value="{{form.name}}" />
    </view>
    <view class="form-field">
      <input class="input required" placeholder="请输入您的称呼（昵称，必填）" bindinput="onInputNickname" value="{{form.nickname}}" />
    </view>
  </view>

  <view class="section">
    <view class="section-title">📅 出生时间</view>
    <radio-group class="calendar-radio-group" bindchange="onCalendarTypeChange">
      <label class="calendar-radio"><radio value="gregorian" checked="{{form.calendar_type === 'gregorian'}}" /> 公历</label>
      <label class="calendar-radio"><radio value="lunar" checked="{{form.calendar_type === 'lunar'}}" /> 农历</label>
    </radio-group>
    <view class="form-row">
      <picker mode="selector" range="{{yearRange}}" value="{{yearIndex}}" bindchange="onYearChange">
        <view class="picker">{{form.birth_year || '年份'}}</view>
      </picker>
      <picker mode="selector" range="{{currentMonthRange}}" value="{{monthIndex}}" bindchange="onMonthChange">
        <view class="picker">{{displayMonth || '月份'}}</view>
      </picker>
      <picker mode="selector" range="{{currentDayRange}}" value="{{dayIndex}}" bindchange="onDayChange">
        <view class="picker">{{displayDay || '日期'}}</view>
      </picker>
    </view>
    <view class="form-row">
      <picker mode="time" value="{{birthTime}}" bindchange="onTimeChange">
        <view class="picker">{{birthTime || '选择时间（小时:分钟）'}}</view>
      </picker>
    </view>
    <view class="hint">请输入准确的出生时间，用于精确计算真太阳时</view>
  </view>

  <view class="section">
    <view class="section-title">🌍 出生地</view>
    <view class="form-row">
      <input class="input" placeholder="请输入出生城市，如：北京市" bindinput="onInputCity" value="{{form.location_city}}" />
      <button class="locate" size="mini" bindtap="onLocate">📍定位</button>
    </view>
    <view class="hint">出生地影响真太阳时计算，建议如实填写</view>
  </view>

  <view class="section">
    <view class="section-title">⚧️ 性别与生命周期分析</view>
    <radio-group class="radio-group" bindchange="onGenderChange">
      <label class="radio"><radio value="male" checked="{{form.gender === 'male'}}" /> 男</label>
      <label class="radio"><radio value="female" checked="{{form.gender === 'female'}}" /> 女</label>
      <label class="radio"><radio value="other" checked="{{form.gender === 'other'}}" /> 不愿透露</label>
    </radio-group>
    <view class="switch-row">
      <text>用于健康分析</text>
      <switch checked="{{form.for_health_analysis}}" bindchange="onHealthSwitch" />
    </view>
    <view class="hint">若关闭“健康分析”，则不启用体质模型推导</view>
  </view>

  <view class="bottom-bar">
    <button class="submit" bindtap="onSubmit">生成我的命盘 🌿</button>
  </view>

  <view class="tabbar-placeholder"></view>
</view>
