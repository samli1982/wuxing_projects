<view class="page">
  <view class="nav">
    <view class="nav-left" bindtap="onBack">â†</view>
    <view class="nav-title">æˆ‘çš„å‘½ç›˜</view>
    <view class="nav-right" bindtap="onEdit">âœï¸</view>
  </view>

  <scroll-view class="user-selector" scroll-x="true" show-scrollbar="false">
    <block wx:for="{{palmtrees}}" wx:key="id">
      <view class="user-item {{selectedId===item.id?'active':''}}" bindtap="switchPalmtree" data-id="{{item.id}}" bindlongpress="onLongPress" data-id="{{item.id}}">
        <view class="avatar" style="background-color: {{item.avatar_color}};">
          <text>{{item.nickname.charAt(0)}}</text>
        </view>
        <view class="year">{{item.year}}</view>
      </view>
    </block>
    <view class="user-item add" bindtap="onCreate">
      <view class="avatar add-icon">
        <text>+</text>
      </view>
    </view>
  </scroll-view>

  <view class="ident">
    <view class="nick">{{nickname}} çš„å‘½ç›˜</view>
    <view class="birth">å‡ºç”Ÿäºï¼š{{birthInfo}}</view>
  </view>

  <view class="card bazi">
    <view class="bazi-header">
      <text>å››æŸ±å…«å­—</text>
    </view>
    <view class="grid">
      <view class="cell"><text>{{eight.year.heavenly_stem}}</text></view>
      <view class="cell"><text>{{eight.month.heavenly_stem}}</text></view>
      <view class="cell highlight"><text>{{eight.day.heavenly_stem}}</text></view>
      <view class="cell"><text>{{eight.hour.heavenly_stem}}</text></view>

      <view class="cell"><text>{{eight.year.earthly_branch}}</text></view>
      <view class="cell"><text>{{eight.month.earthly_branch}}</text></view>
      <view class="cell highlight"><text>{{eight.day.earthly_branch}}</text></view>
      <view class="cell"><text>{{eight.hour.earthly_branch}}</text></view>
    </view>
    <view class="note">çº³éŸ³ï¼š{{nayin}}ï½œç©ºäº¡ï¼š{{kongwang}}ï½œèƒå…ƒï¼š{{taiyuan}}</view>
  </view>

  <view class="card wuxing">
    <view class="section-title">ğŸ“Š äº”è¡Œå¼ºå¼±åˆ†å¸ƒ</view>
    <view class="bar" bindtap="onBarTap" data-name="æœ¨"><view class="bar-fill wood" style="width: {{barWidthWood}};"></view><text class="bar-label">æœ¨ {{wuxingWood}}</text></view>
    <view class="bar" bindtap="onBarTap" data-name="ç«"><view class="bar-fill fire" style="width: {{barWidthFire}};"></view><text class="bar-label">ç« {{wuxingFire}}</text></view>
    <view class="bar" bindtap="onBarTap" data-name="åœŸ"><view class="bar-fill earth" style="width: {{barWidthEarth}};"></view><text class="bar-label">åœŸ {{wuxingEarth}}</text></view>
    <view class="bar" bindtap="onBarTap" data-name="é‡‘"><view class="bar-fill metal" style="width: {{barWidthMetal}};"></view><text class="bar-label">é‡‘ {{wuxingMetal}}</text></view>
    <view class="bar" bindtap="onBarTap" data-name="æ°´"><view class="bar-fill water" style="width: {{barWidthWater}};"></view><text class="bar-label">æ°´ {{wuxingWater}}ï¼ˆæœ€å¼±ï¼‰</text></view>
    <view class="useful-gods">
      <text class="gods-title">ğŸ¯ å–œç”¨ç¥ï¼š</text>
      <block wx:for="{{usefulGods}}" wx:key="*this">
        <view class="god-tag">{{item}}</view>
      </block>
      <view class="hint" bindtap="onShowGodsTheory">ï¼Ÿ</view>
    </view>
  </view>

  <view class="card wuyun">
    <view class="section-title">ğŸŒ¤ï¸ {{wuyunliuqi.year}}å¹´ äº”è¿å…­æ°”</view>
    <view class="wuyun-row">
      <view class="wuyun-tag gold">ã€ä¸­è¿ã€‘{{wuyunliuqi.transportation}}</view>
    </view>
    <view class="wuyun-row">
      <view class="wuyun-tag fire">ã€å¸å¤©ã€‘{{wuyunliuqi.tiansi}}</view>
      <view class="wuyun-tag metal">ã€åœ¨æ³‰ã€‘{{wuyunliuqi.zaiquan}}</view>
    </view>
    <view class="wuyun-climate">æ°”å€™ç‰¹å¾ï¼š{{wuyunliuqi.climate}}</view>
    <view class="wuyun-warnings">
      <view class="warn-title">å¥åº·æç¤ºï¼š</view>
      <block wx:for="{{wuyunliuqi.health_warnings}}" wx:key="index">
        <view class="warn-item">â€¢ {{item}}</view>
      </block>
    </view>
  </view>

  <view class="card constitution">
    <view class="section-title">ğŸ§˜â€â™‚ï¸ ä½“è´¨ç±»å‹åˆ¤å®š</view>
    <view class="ctype">{{constitution}}</view>
    <view class="tags">
      <view class="tag hot">åçƒ­ä½“è´¨</view>
      <view class="tag bright">æœ¨ç«é€šæ˜</view>
    </view>
    <view class="desc">æˆå› åˆ†æï¼š{{analysis.cause}}</view>
    <view class="desc">æ˜“å‘ç—‡çŠ¶ï¼š{{analysis.symptom}}</view>
    <view class="desc">è°ƒå…»æ–¹å‘ï¼š{{analysis.tune}}</view>
  </view>

  <view class="card tips">
    <view class="tabs">
      <view class="tab {{activeTab==='diet'?'active':''}}" bindtap="switchTab" data-tab="diet">ğŸµ é¥®é£Ÿ</view>
      <view class="tab {{activeTab==='lifestyle'?'active':''}}" bindtap="switchTab" data-tab="lifestyle">ğŸ§˜â€â™€ï¸ èµ·å±…</view>
      <view class="tab {{activeTab==='emotion'?'active':''}}" bindtap="switchTab" data-tab="emotion">â¤ï¸ æƒ…å¿—</view>
      <view class="tab {{activeTab==='herb'?'active':''}}" bindtap="switchTab" data-tab="herb">ğŸŒ¿ è¯å¼•</view>
    </view>
    <view class="tip-list">
      <block wx:for="{{displayTips}}" wx:key="index">
        <view class="tip-item">
          <view class="dot"></view>
          <text class="tip-text">{{item.text}}</text>
        </view>
      </block>
    </view>
  </view>

  <view class="bottom-actions">
    <button class="btn save" bindtap="onSave">ä¿å­˜å‘½ç›˜</button>
    <button class="btn share" open-type="share">åˆ†äº«æŠ¥å‘Š</button>
    <button class="btn detail" bindtap="onDetail">æŸ¥çœ‹è¯¦è§£</button>
  </view>
</view>
