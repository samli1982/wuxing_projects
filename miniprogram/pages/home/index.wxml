<view class="page">
  <view class="status-bar" style="height: {{statusBarHeight}}px;"></view>

  <!-- æ—¥å‡º | å†œå† | èŠ‚æ°” | åŒ—æ–— è‡ªåŠ¨å¾ªç¯æ»šåŠ¨ -->
  <view class="scrolling-banner">
    <view class="scrolling-content" style="animation-duration: {{scrollDuration}}s;">
      <view class="banner-item">
        <text class="banner-icon">â˜€ï¸</text>
        <text class="banner-text">æ—¥å‡º {{headerInfo.sunriseTime}}</text>
      </view>
      <text class="banner-separator">|</text>
      <view class="banner-item">
        <text class="banner-text">{{headerInfo.lunarDate}}</text>
      </view>
      <text class="banner-separator">|</text>
      <view class="banner-item" bindtap="onShowSolarTerm">
        <text class="banner-text">{{headerInfo.solarTermName}} Â· ç¬¬{{headerInfo.solarTermDayIndex}}å¤©</text>
      </view>
      <text class="banner-separator">|</text>
      <view class="banner-item" bindtap="onShowSolarTerm">
        <text class="banner-text">{{headerInfo.beidouDirection}}</text>
      </view>
    </view>
  </view>

  <!-- å…¬å†ã€å¹²æ”¯å†ã€å¹²æ”¯çºªå¹´å†ç»Ÿä¸€å¡ç‰‡ -->
  <view class="calendar-card">
    <view class="calendar-row">
      <text class="calendar-value">{{solarDateTime}}</text>
    </view>
    <view class="calendar-row" bindtap="onShowSixtiesCycle">
      <text class="calendar-value">{{sixtiesCycleInfo.sixtyCycleDate}}</text>
    </view>
    <view class="calendar-row" bindtap="onGoEmperorCalendar">
      <text class="calendar-value emperor-text">{{emperorCalendarTitle}}</text>
      <text class="calendar-arrow">â†’</text>
    </view>
  </view>

  <!-- äº”è¿å…­æ°”å¡ç‰‡ -->
  <view class="card">
    <view class="card-year">
      <text>ã€{{wuyun.year}} {{wuyun.ganzhi}}ã€‘</text>
      <text class="nayin">çº³éŸ³ï¼š{{wuyun.nayin}}</text>
    </view>

    <view class="card-core">
      <view class="taichi">âšªï¸</view>
      <view class="labels">
        <view class="label"><text class="label-title">ã€ä¸­è¿ã€‘</text><text class="label-value">{{wuyun.wuyun}}</text></view>
        <view class="label"><text class="label-title">ã€å¸å¤©ã€‘</text><text class="label-value">{{wuyun.sitian}}</text></view>
        <view class="label"><text class="label-title">ã€åœ¨æ³‰ã€‘</text><text class="label-value">{{wuyun.zaiquan}}</text></view>
        <view class="flow">äº”è¡Œæµè½¬ï¼ˆé‡‘â†’æ°´â†’æœ¨â†’ç«â†’åœŸï¼‰</view>
      </view>
    </view>

    <view class="climate-section" wx:if="{{wuyun.climate}}">
      <view class="section-label">æ°”å€™ç‰¹å¾ï¼š</view>
      <text class="climate-text">{{wuyun.climate}}</text>
    </view>

    <view class="tips">
      <view class="tips-label">å¥åº·æç¤ºï¼š</view>
      <block wx:for="{{displayTips}}" wx:key="index">
        <view class="tip-item">
          <view class="dot"></view>
          <text class="tip-text">{{item}}</text>
        </view>
      </block>
      <view class="more" wx:if="{{wuyun.healthTips.length > 3}}">
        <text class="link" bindtap="toggleTips">{{showAllTips ? 'æ”¶èµ·' : 'å±•å¼€æ›´å¤š'}}</text>
      </view>
    </view>

    <view class="link-area">
      <text class="link" bindtap="goWuYunDetail">æŸ¥çœ‹ã€Šäº”è¿å…­æ°”è¯¦è§£ã€‹</text>
    </view>
  </view>

  <view class="actions">
    <button class="btn primary" bindtap="onCreatePalmtree">
      <text class="btn-icon">ğŸ–‹ï¸</text>
      <text class="btn-text">åˆ›å»ºæˆ‘çš„å‘½ç›˜</text>
    </button>
    <button class="btn secondary" bindtap="onViewPalmtree">
      <text class="btn-icon">ğŸ“</text>
      <text class="btn-text">{{hasPalmtree ? latestPalmtreeSummary : 'æš‚æœªåˆ›å»º'}}</text>
    </button>
  </view>

  <view class="health-banner" wx:if="{{healthTipVisible}}">
    <text class="health-icon">ğŸ’¡</text>
    <text class="health-text">{{healthTipText}}</text>
    <text class="close" bindtap="onCloseHealthTip">Ã—</text>
  </view>

  <view class="tabbar-placeholder"></view>
</view>
