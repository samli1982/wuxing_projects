<view class="page">
  <view class="status-bar"></view>
  <view class="nav">
    <view class="nav-left" bindtap="onBack">â†</view>
    <view class="nav-title">äºŒåäº”å‘³è¯ç²¾</view>
    <view class="nav-right" bindtap="onSearch">ğŸ”</view>
  </view>

  <view class="motto">
    <text class="line">ğŸŒ¿ ä»¥é™°é™½å¯’ç†±ä¹‹æ°£ç‚ºç¶±</text>
    <text class="line">ä»¥äº”è—è™›å¯¦èªè­˜ç–¾ç—…</text>
    <text class="line">ä»¥æ°£å‘³å’Œåˆæ²»ç™‚ç–¾ç—…</text>
    <view class="hint" bindtap="onShowTheory">â” æŸ¥çœ‹ã€Šè¾…è¡Œè¯€ã€‹åŸæ–‡</view>
  </view>

  <view class="filters">
    <scroll-view class="tab-parent" scroll-x="true" show-scrollbar="false">
      <view class="tab {{activeParent==='æœ¨'?'active':''}}" bindtap="switchParent" data-val="æœ¨">æœ¨</view>
      <view class="tab {{activeParent==='ç«'?'active':''}}" bindtap="switchParent" data-val="ç«">ç«</view>
      <view class="tab {{activeParent==='åœŸ'?'active':''}}" bindtap="switchParent" data-val="åœŸ">åœŸ</view>
      <view class="tab {{activeParent==='é‡‘'?'active':''}}" bindtap="switchParent" data-val="é‡‘">é‡‘</view>
      <view class="tab {{activeParent==='æ°´'?'active':''}}" bindtap="switchParent" data-val="æ°´">æ°´</view>
    </scroll-view>
    <scroll-view class="tab-child" scroll-x="true" show-scrollbar="false">
      <block wx:for="{{childTabs}}" wx:key="*this">
        <view class="tab-child-item {{activeSub===item?'active':''}}" bindtap="switchSub" data-val="{{item}}">{{item}}</view>
      </block>
    </scroll-view>
  </view>

  <view class="list" wx:if="{{list.length > 0}}">
    <block wx:for="{{list}}" wx:key="id">
      <view class="card" bindtap="onCardTap" data-id="{{item.id}}">
        <view class="collect" wx:if="{{item.is_collected}}">â¤ï¸</view>
        <view class="card-header">
          <text class="number">{{item.number}}</text>
          <text class="category">{{item.category}}</text>
          <text class="icon">{{item.categoryIcon}}</text>
        </view>
        <view class="name">{{item.name}}ï¼ˆ{{item.alias}}ï¼‰</view>
        <view class="props">
          <block wx:for="{{item.taste}}" wx:key="*this" wx:for-item="taste">
            <view class="prop-tag taste">{{taste}}</view>
          </block>
          <view class="prop-tag nature {{item.natureClass}}">{{item.properties}}</view>
        </view>
        <view class="effects">{{item.effects[0]}}</view>
      </view>
    </block>
  </view>

  <view class="empty" wx:else>
    <text class="empty-icon">ğŸ“­</text>
    <view class="empty-text">
      <text class="title">æœªæ‰¾åˆ°åŒ¹é…çš„è¯ç²¾</text>
      <text class="desc">å½“å‰ç­›é€‰æ¡ä»¶ä¸‹æš‚æ— æ•°æ®ï¼Œ</text>
      <text class="desc">è¯·å°è¯•æ›´æ¢åˆ†ç±»æˆ–ä½¿ç”¨æœç´¢åŠŸèƒ½ã€‚</text>
      <button class="reset" bindtap="onReset">é‡ç½®ç­›é€‰</button>
    </view>
  </view>

  <view class="search-panel" wx:if="{{showSearch}}">
    <view class="search-bar">
      <view class="close" bindtap="onCloseSearch">Ã—</view>
      <input class="search-input" placeholder="è¾“å…¥è¯åã€åŠŸæ•ˆã€æ€§å‘³â€¦" bindinput="onSearchInput" value="{{searchKeyword}}" confirm-type="search" bindconfirm="onSearchConfirm" />
    </view>
    <view class="search-results" wx:if="{{searchResults.length > 0}}">
      <block wx:for="{{searchResults}}" wx:key="id">
        <view class="search-item" bindtap="onSearchResultTap" data-id="{{item.id}}">
          <text class="search-name">{{item.name}}</text>
          <text class="search-cat">{{item.category}}</text>
        </view>
      </block>
    </view>
  </view>
</view>
